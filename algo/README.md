## ACTIN-Algo

ACTIN-Algo matches a patient record (clinical & molecular data) with available treatments.

This application requires Java 11+ and can be run as follows: 

```
java -cp actin.jar com.hartwig.actin.algo.TreatmentMatcherApplication \
   -clinical_json /path/to/clinical.json \
   -molecular_json /path/to/molecular.json \
   -treatment_database_directory /path/to/potential_treatment_options \
   -output_directory /path/where/output/is/written \
```

The following assumptions are made about the inputs:
 - The clinical JSON adheres to the format that is generated by [ACTIN-Clinical](../clinical/README.md).
 - The molecular JSON is the [ORANGE](https://github.com/hartwigmedical/hmftools/blob/master/orange/README.md) 
 output from the [Hartwig platinum pipeline](https://github.com/hartwigmedical/platinum)
 - The treatment database directory is the output directory of [ACTIN-Treatment](../treatment/README.md)
 
### Treatment matching

Every treatment defined in the treatment database is evaluated independently. In case a treatment is a trial, then all inclusion 
and exclusion criteria are evaluated for this trial as well as every criterion for any specific cohort within this trial.  

The potential results for any individual inclusion rule are as follows:

Evaluation | Description
---|---
PASS | The patient complies with the inclusion or exclusion rule.  
PASS_BUT_WARN | The patient complies with the inclusion or exclusion rule but a manual check is required.
FAIL | The patient does not comply with the inclusion or exclusion rule. 
UNDETERMINED | The data provided to the inclusion or exclusion rule is insufficient for determining eligibility.
NOT_IMPLEMENTED | The rule hasn't been implemented yet.

For every trial (and cohort) an overall evaluation is determined using the following rules:
 1. A patient is eligible for a trial (or cohort) only in case all criteria are `PASS` or `PASS_BUT_WARN`.
 1. In case one of the criteria evaluates to a `FAIL` the patient fails eligibility. 
 1. In case of no fails but at least one `UNDETERMINED` or `NOT_IMPLEMENTED` the overall evaluation is `UNDETERMINED`.    

Furthermore there are some specific additional rules related to trials versus cohorts within trials:
 1. A patient is eligible for a specific cohort only if the overall evaluation for both the cohort as well as the trial itself are passed.
 1. A patient is eligible for a trial only if it is eligible for at least one of the cohorts within the trial or if the trial has no 
 cohorts defined and the patient passes the criteria for the trial.  

#### Individual criterion rules

Inclusion and exclusion criteria can be defined as composite functions. The following composite functions are available:

Function | Description 
---|---
AND | -
NOT | -
OR | _
WARN_ON_FAIL | 

The following individual rules are supported:

Category | Rule | When does a patient pass evaluation?
---|---|---
General | IS_AT_LEAST_18_YEARS_OLD | -
General | IS_BREASTFEEDING | -
General | IS_PREGNANT | - 
General | HAS_LIFE_EXPECTANCY_OF_AT_LEAST_X_WEEKS | -
General | HAS_WHO_STATUS_OF_AT_MOST_X | - 
General | HAS_HAD_SURGERY_WITHIN_LAST_X_WEEKS | -
Pathology | PRIMARY_TUMOR_LOCATION_BELONGS_TO_DOID_X | - 
Radiology | HAS_ADVANCED_CANCER | -
Radiology | HAS_METASTATIC_CANCER | -
Radiology | HAS_LIVER_METASTASES | -
Radiology | HAS_ACTIVE_CNS_METASTASES | -
Radiology | HAS_MEASURABLE_DISEASE_RECIST | - 
Radiology | HAS_BIOPSY_AMENABLE_LESION | -
Treatment | HAS_EXHAUSTED_SOC_TREATMENTS | - 
Treatment | HAS_DECLINED_SOC_TREATMENTS | -
Treatment | HAS_HAD_MAX_X_NR_ANTI_PD_L1_OR_PD_1_IMMUNOTHERAPIES | -
Treatment | HAS_HISTORY_OF_SECOND_MALIGNANCY | -
Treatment | SECOND_MALIGNANCY_HAS_BEEN_CURED_SINCE_X_YEARS | -
Laboratory | HAS_LEUKOCYTES_ABS_OF_AT_LEAST_X | -
Laboratory | HAS_HEMOGLOBIN_G_PER_DL_OF_AT_LEAST_X | -
Laboratory | HAS_THROMBOCYTES_ABS_AT_LEAST_X | -
Laboratory | HAS_CREATININE_ULN_OF_AT_MOST_X | -
Laboratory | HAS_CREATININE_CLEARANCE_CKD_EPI_OF_AT_LEAST_X | -
Laboratory | HAS_TOTAL_BILIRUBIN_ULN_AT_MOST_X | -
Laboratory | HAS_DIRECT_BILIRUBIN_ULN_AT_MOST_X | -
Laboratory | HAS_ASAT_ULN_OF_AT_MOST_X | -
Laboratory | HAS_INR_ULN_AT_MOST_X | -
Laboratory | HAS_PT_ULN_AT_MOST_X | -
Laboratory | HAS_APTT_ULN_AT_MOST_X | -
Other condition | HAS_ACTIVE_INFECTION | -
Other condition | HAS_SIGNIFICANT_CONCOMITANT_ILLNESS | -
Other condition | HAS_HISTORY_OF_AUTOIMMUNE_DISEASE | -
Other condition | HAS_HISTORY_OF_CARDIAC_DISEASE | -
Other condition | HAS_KNOWN_HEPATITIS_B_INFECTION | -
Other condition | HAS_KNOWN_HEPATITIS_C_INFECTION | -
Other condition | HAS_KNOWN_HIV_INFECTION | -
Other condition | HAS_GILBERT_DISEASE | -
Medication | HAS_ALLERGY_RELATED_TO_STUDY_MEDICATION | -
Medication | HAS_STABLE_ANTICOAGULANT_DOSING | -
Medication | HAS_TOXICITY_OF_AT_LEAST_GRADE_X | -
Medication | HAS_TOXICITY_OF_AT_LEAST_GRADE_X_IN_NEUROPATHY | -
Medication | CURRENTLY_GETS_IMMUNOSUPPRESSANT_MEDICATION | -
Medication | CURRENTLY_GETS_CORTICOSTEROID_MEDICATION | -
Blood pressure | HAS_SBP_MMHG_OF_AT_LEAST_X | -
Blood pressure | HAS_DBP_MMHG_OF_AT_LEAST_X | -
Blood transfusion | HAS_HAD_ERYTHROCYTE_TRANSFUSION_WITHIN_LAST_X_WEEKS | -
Blood transfusion | HAS_HAD_THROMBOCYTE_TRANSFUSION_WITHIN_LAST_X_WEEKS | -
 
### Version History and Download Links
 - Upcoming (first release) 